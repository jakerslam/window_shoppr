# Blog Workflow (B1-B16)

- `B1`: Blog architecture is live with:
  - `/blog/` index route
  - `/blog/[slug]/` article route
  - taxonomy fields (`category`, `tags`)
  - breadcrumb navigation and canonical metadata
- `B2`: Desktop top bar exposes a `Blog` entry; mobile top-level nav still omits blog entry.
- `B3`: Topic proposal scoring pipeline in `src/shared/lib/blog/pipeline.ts`.
- `B4`: Eligibility gate requires at least one referral link (`referralLinkCount >= 1`).
- `B5`: Agentic research plan generator returns:
  - competitor format checklist
  - source collection checklist
  - fact validation checklist
  - outline section plan
- `B6`: Outline generation workflow:
  - `generateBlogOutline(...)` in `src/shared/lib/blog/workflows.ts`
  - Uses soft structure guidance (not rigid essay template).
  - Supports tone/style variation by topic signal (guide/story/listicle/comparison).
- `B7`: Draft generation workflow:
  - `generateBlogDraft(...)` in `src/shared/lib/blog/workflows.ts`
  - Produces readable long-form blocks with skimmable formatting.
- `B8`: SEO + LLM optimization layer:
  - `optimizeBlogForSeoAndLlm(...)` in `src/shared/lib/blog/workflows.ts`
- `B9`: AI metadata generation:
  - `generateBlogMetadata(...)` in `src/shared/lib/blog/workflows.ts`
- `B10`: Quality gates:
  - `runBlogQualityGates(...)` in `src/shared/lib/blog/workflows.ts`
  - Enforces usefulness-or-fun gate, scannability, readability, and affiliate-link coverage.
- `B11`: Editorial polish pass:
  - `runEditorialPolishPass(...)` in `src/shared/lib/blog/workflows.ts`
  - Normalizes paragraph spacing for blog readability.
- `B12`: Publish states + approvals:
  - state transitions in `transitionBlogWorkflowState(...)`
  - workflow audit trail in `src/shared/lib/blog/approvals.ts`
- `B13`: Blog index personalization:
  - `rankBlogArticlesForUser(...)` and client-side index ranking.
- `B14`: Blog conversion instrumentation:
  - `trackBlogEvent(...)` for article-open and affiliate-click signals.
- `B15`: Backend CMS/API stubs:
  - `getBlogCatalog(...)` and `upsertBlogArticle(...)` in `src/shared/lib/blog/cms.ts`
- `B16`: Local fallback sample set:
  - `10` sample blog articles in `src/shared/lib/blog/data.ts`
  - Generated from feed products (category/tag/blogSlug match) with embedded affiliate CTAs.

## Layout Standards
- Layout standards are defined in:
  - `src/shared/lib/blog/layout-standards.ts`
- Required variants:
  - `guide`
  - `comparison`
  - `listicle`
- Each variant defines required section kinds and recommended word ranges.
